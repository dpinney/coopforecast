{% extends 'base-and-nav.html' %}

{% block title %}Latest Forecast{% endblock %}
{% block head %}{% endblock %}

{% block content %}
<h1>Latest Forecast</h1>

{% include 'partials/messages.html' %}

{% if not is_prepared %}
<div class="alert alert-primary">
  Insufficient data has been provided to launch a new model. Please ensure that the proper load and temperature data has
  been uploaded.
</div>
{% endif %}

{% if is_prepared and forecast_model and forecast_model.start_date != start_date %}
<form action="" method="post" id="runModel"></form>
<div class="alert alert-primary">
  <a onclick="document.forms['runModel'].submit(); return false;" class="btn btn-primary btn-icon-split">
    <span class="icon text-white-600">
      <i class="fas fa-arrow-right"></i>
    </span>
    <span class="text">Generate new model</span>
  </a>
  <span>
    Generate a new model from <b class="text-primary">{{
      start_date.strftime('%b %d, %Y %H:%M') }}</b> to <b class="text-primary">
      {{ end_date.strftime('%b %d, %Y %H:%M') }}</b>
  </span>
</div>
{% endif %}

{% if forecast_model %}
{% include 'partials/forecast-model.html' %}
{% endif %}

{% endblock %}